{% extends "base.html" %} {% block content %}
<div class="order-history-container">
  <h1>Your Order History</h1>
  {% if orders %} {% for order in orders %}
  <div class="order">
    <h2>Order #{{ order.id }}</h2>
    <p>Date: {{ order.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
    <p>Status: {{ order.status }}</p>
    <p>Total: ${{ "%.2f"|format(order.total_price) }}</p>
    <h3>Items:</h3>
    <ul>
      {% for item in order.items %}
      <li>
        {{ item.quantity }}x {{ item.menu_item.name }} - ${{
        "%.2f"|format(item.subtotal) }}
      </li>
      {% endfor %}
    </ul>
    {% if order.status == 'pending' %}
    <a
      href="{{ url_for('customer.cancel_order', order_id=order.id) }}"
      class="btn-cancel"
      >Cancel Order</a
    >
    {% endif %}
  </div>
  {% endfor %}

  <table class="order-table">
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Date</th>
        <th>Total</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>${{ "%.2f"|format(order.total_price) }}</td>
        <td>{{ order.status }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>You haven't placed any orders yet.</p>
  {% endif %}
</div>
{% endblock %}
